# Starter pipeline


# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- main


pool:
  vmImage: ubuntu-latest

steps:
- task: CMake@1
  inputs:
    # workingDirectory: main/build
    runInsideShell: true


- script: |
          wget https://github.com/llvm/llvm-project/releases/download/llvmorg-11.1.0/clang+llvm-11.1.0-x86_64-linux-gnu-ubuntu-16.04.tar.xz
          tar -xvf "clang+llvm-11.1.0-x86_64-linux-gnu-ubuntu-16.04.tar.xz"
          cd clang+llvm-11.1.0-x86_64-linux-gnu-ubuntu-16.04
          cd bin
          sudo cp -r ./* ../../../../../../../usr/local/bin && rm -R ./* 
          cd ..
          cd include 
          sudo mv ./* ../../../../../../../usr/local/include
           cp -r ./* ../../../../../../../usr/local/bin
          cd ..
          cd lib 
          sudo mv ./* ../../../../../../../usr/local/lib
          cd ..
          cd share 
          sudo mv ./* ../../../../../../../usr/local/share
          cd ..
          cd libexec
          sudo mv ./* ../../../../../../../usr/libexec
  displayName: 'LLVM SETUP'

- script: |
          pwd
          mkdir build 
          cd build 
          cmake ..
          cmake --build .
  displayName: 'build '